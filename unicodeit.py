# Copyright (c) 2010 Sven Kreiss, Kyle Cranmer
__author__ = "Sven Kreiss <sk@svenkreiss.com>, Kyle Cranmer <kyle.cranmer@nyu.edu>"
__version__ = "0.6"
import sys, re

replacements = [
    [ur'\\textfractionsolidus', u'\u2044'],
    [ur'\\leftrightsquigarrow', u'\u21AD'],
    [ur'\\textpertenthousand', u'\u2031'],
    [ur'\\blacktriangleright', u'\u25B8'],
    [ur'\\blacktriangledown', u'\u25BE'],
    [ur'\\blacktriangleleft', u'\u25C2'],
    [ur'\\twoheadrightarrow', u'\u21A0'],
    [ur'\\leftrightharpoons', u'\u21CB'],
    [ur'\\rightleftharpoons', u'\u21CC'],
    [ur'\\textreferencemark', u'\u203B'],
    [ur'\\circlearrowright', u'\u21BB'],
    [ur'\\rightrightarrows', u'\u21C9'],
    [ur'\\vartriangleright', u'\u22B3'],
    [ur'\\textordmasculine', u'\u00BA'],
    [ur'\\textvisiblespace', u'\u2423'],
    [ur'\\twoheadleftarrow', u'\u219E'],
    [ur'\\downharpoonright', u'\u21C2'],
    [ur'\\ntrianglerighteq', u'\u22ED'],
    [ur'\\rightharpoondown', u'\u21C1'],
    [ur'\\textperthousand', u'\u2030'],
    [ur'\\leftrightarrows', u'\u21C6'],
    [ur'\\textmusicalnote', u'\u266A'],
    [ur'\\nleftrightarrow', u'\u21AE'],
    [ur'\\rightleftarrows', u'\u21C4'],
    [ur'\\bigtriangledown', u'\u25BD'],
    [ur'\\textordfeminine', u'\u00AA'],
    [ur'\\ntrianglelefteq', u'\u22EC'],
    [ur'\\rightthreetimes', u'\u22CC'],
    [ur'\\trianglerighteq', u'\u22B5'],
    [ur'\\vartriangleleft', u'\u22B2'],
    [ur'\\rightsquigarrow', u'\u21DD'],
    [ur'\\downharpoonleft', u'\u21C3'],
    [ur'\\curvearrowright', u'\u21B7'],
    [ur'\\circlearrowleft', u'\u21BA'],
    [ur'\\leftharpoondown', u'\u21BD'],
    [ur'\\nLeftrightarrow', u'\u21CE'],
    [ur'\\curvearrowleft', u'\u21B6'],
    [ur'\\guilsinglright', u'\u203A'],
    [ur'\\leftthreetimes', u'\u22CB'],
    [ur'\\leftrightarrow', u'\u2194'],
    [ur'\\rightharpoonup', u'\u21C0'],
    [ur'\\guillemotright', u'\u00BB'],
    [ur'\\downdownarrows', u'\u21CA'],
    [ur'\\hookrightarrow', u'\u21AA'],
    [ur'\\hspace\{0\.25em}', u'\u2005'],
    [ur'\\dashrightarrow', u'\u21E2'],
    [ur'\\leftleftarrows', u'\u21C7'],
    [ur'\\trianglelefteq', u'\u22B4'],
    [ur'\\ntriangleright', u'\u22EB'],
    [ur'\\doublebarwedge', u'\u2306'],
    [ur'\\upharpoonright', u'\u21BE'],
    [ur'\\rightarrowtail', u'\u21A3'],
    [ur'\\looparrowright', u'\u21AC'],
    [ur'\\Leftrightarrow', u'\u21D4'],
    [ur'\\sphericalangle', u'\u2222'],
    [ur'\\divideontimes', u'\u22C7'],
    [ur'\\measuredangle', u'\u2221'],
    [ur'\\blacktriangle', u'\u25B4'],
    [ur'\\ntriangleleft', u'\u22EA'],
    [ur'\\mathchar"1356', u'\u2041'],
    [ur'\\texttrademark', u'\u2122'],
    [ur'\\mathchar"2208', u'\u2316'],
    [ur'\\triangleright', u'\u25B9'],
    [ur'\\leftarrowtail', u'\u21A2'],
    [ur'\\guilsinglleft', u'\u2039'],
    [ur'\\upharpoonleft', u'\u21BF'],
    [ur'\\mathbb\{gamma}', u'\u213D'],
    [ur'\\fallingdotseq', u'\u2252'],
    [ur'\\looparrowleft', u'\u21AB'],
    [ur'\\textbrokenbar', u'\u00A6'],
    [ur'\\hookleftarrow', u'\u21A9'],
    [ur'\\smallsetminus', u'\uFE68'],
    [ur'\\dashleftarrow', u'\u21E0'],
    [ur'\\guillemotleft', u'\u00AB'],
    [ur'\\leftharpoonup', u'\u21BC'],
    [ur'\\mathbb\{Gamma}', u'\u213E'],
    [ur'\\bigtriangleup', u'\u25B3'],
    [ur'\\textcircledP', u'\u2117'],
    [ur'\\risingdotseq', u'\u2253'],
    [ur'\\triangleleft', u'\u25C3'],
    [ur'\\mathsterling', u'\u00A3'],
    [ur'\\textcurrency', u'\u00A4'],
    [ur'\\triangledown', u'\u25BF'],
    [ur'\\blacklozenge', u'\uE80B'],
    [ur'\\sfrac\{5}\{6}', u'\u215A'],
    [ur'\\preccurlyeq', u'\u227C'],
    [ur'\\Rrightarrow', u'\u21DB'],
    [ur'\\circledcirc', u'\u229A'],
    [ur'\\nRightarrow', u'\u21CF'],
    [ur'\\sfrac\{3}\{8}', u'\u215C'],
    [ur'\\sfrac\{1}\{3}', u'\u2153'],
    [ur'\\sfrac\{2}\{5}', u'\u2156'],
    [ur'\\vartriangle', u'\u25B5'],
    [ur'\\Updownarrow', u'\u21D5'],
    [ur'\\nrightarrow', u'\u219B'],
    [ur'\\sfrac\{1}\{2}', u'\u00BD'],
    [ur'\\sfrac\{3}\{5}', u'\u2157'],
    [ur'\\succcurlyeq', u'\u227D'],
    [ur'\\sfrac\{4}\{5}', u'\u2158'],
    [ur'\\diamondsuit', u'\u2666'],
    [ur'\\hphantom\{0}', u'\u2007'],
    [ur'\\sfrac\{1}\{6}', u'\u2159'],
    [ur'\\curlyeqsucc', u'\u22DF'],
    [ur'\\blacksquare', u'\u25AA'],
    [ur'\\hphantom\{,}', u'\u2008'],
    [ur'\\curlyeqprec', u'\u22DE'],
    [ur'\\sfrac\{1}\{8}', u'\u215B'],
    [ur'\\sfrac\{7}\{8}', u'\u215E'],
    [ur'\\sfrac\{1}\{5}', u'\u2155'],
    [ur'\\sfrac\{2}\{3}', u'\u2154'],
    [ur'\\updownarrow', u'\u2195'],
    [ur'\\backepsilon', u'\u220D'],
    [ur'\\circleddash', u'\u229D'],
    [ur'\\eqslantless', u'\u22DC'],
    [ur'\\sfrac\{3}\{4}', u'\u00BE'],
    [ur'\\sfrac\{5}\{8}', u'\u215D'],
    [ur'\\hspace\{1pt}', u'\u200A'],
    [ur'\\sfrac\{1}\{4}', u'\u00BC'],
    [ur'\\mathbb\{Pi}', u'\u213F'],
    [ur'\\mathcal\{M}', u'\u2133'],
    [ur'\\nsupseteqq', u'\u2289'],
    [ur'\\mathcal\{B}', u'\u212C'],
    [ur'\\textrecipe', u'\u211E'],
    [ur'\\nsubseteqq', u'\u2288'],
    [ur'\\subsetneqq', u'\u228A'],
    [ur'\\mathcal\{I}', u'\u2111'],
    [ur'\\upuparrows', u'\u21C8'],
    [ur'\\mathcal\{e}', u'\u212F'],
    [ur'\\mathcal\{L}', u'\u2112'],
    [ur'\\nleftarrow', u'\u219A'],
    [ur'\\mathcal\{H}', u'\u210B'],
    [ur'\\mathcal\{E}', u'\u2130'],
    [ur'\\eqslantgtr', u'\u22DD'],
    [ur'\\curlywedge', u'\u22CF'],
    [ur'\\varepsilon', u'\u03B5'],
    [ur'\\supsetneqq', u'\u228B'],
    [ur'\\rightarrow', u'\u2192'],
    [ur'\\mathcal\{R}', u'\u211B'],
    [ur'\\sqsubseteq', u'\u2291'],
    [ur'\\mathcal\{g}', u'\u210A'],
    [ur'\\sqsupseteq', u'\u2292'],
    [ur'\\complement', u'\u2201'],
    [ur'\\Rightarrow', u'\u21D2'],
    [ur'\\gtreqqless', u'\u22DB'],
    [ur'\\lesseqqgtr', u'\u22DA'],
    [ur'\\circledast', u'\u229B'],
    [ur'\\nLeftarrow', u'\u21CD'],
    [ur'\\Lleftarrow', u'\u21DA'],
    [ur'\\Leftarrow', u'\u21D0'],
    [ur'\\gvertneqq', u'\u2269'],
    [ur'\\mathbb\{C}', u'\u2102'],
    [ur'\\supsetneq', u'\u228B'],
    [ur'\\leftarrow', u'\u2190'],
    [ur'\\nleqslant', u'\u2270'],
    [ur'\\mathbb\{Q}', u'\u211A'],
    [ur'\\mathbb\{Z}', u'\u2124'],
    [ur'\\llbracket', u'\u301A'],
    [ur'\\mathbb\{H}', u'\u210D'],
    [ur'\\spadesuit', u'\u2660'],
    [ur'\\mathit\{o}', u'\u2134'],
    [ur'\\mathbb\{P}', u'\u2119'],
    [ur'\\rrbracket', u'\u301B'],
    [ur'\\supseteqq', u'\u2287'],
    [ur'\\copyright', u'\u00A9'],
    [ur'\\textsc\{k}', u'\u0138'],
    [ur'\\gtreqless', u'\u22DB'],
    [ur'\\mathbb\{j}', u'\u2149'],
    [ur'\\pitchfork', u'\u22D4'],
    [ur'\\estimated', u'\u212E'],
    [ur'\\ngeqslant', u'\u2271'],
    [ur'\\mathbb\{e}', u'\u2147'],
    [ur'\\therefore', u'\u2234'],
    [ur'\\triangleq', u'\u225C'],
    [ur'\\varpropto', u'\u221D'],
    [ur'\\subsetneq', u'\u228A'],
    [ur'\\heartsuit', u'\u2665'],
    [ur'\\mathbb\{d}', u'\u2146'],
    [ur'\\lvertneqq', u'\u2268'],
    [ur'\\checkmark', u'\u2713'],
    [ur'\\nparallel', u'\u2226'],
    [ur'\\mathbb\{R}', u'\u211D'],
    [ur'\\lesseqgtr', u'\u22DA'],
    [ur'\\downarrow', u'\u2193'],
    [ur'\\mathbb\{D}', u'\u2145'],
    [ur'\\mathbb\{i}', u'\u2148'],
    [ur'\\backsimeq', u'\u22CD'],
    [ur'\\mathbb\{N}', u'\u2115'],
    [ur'\\Downarrow', u'\u21D3'],
    [ur'\\subseteqq', u'\u2286'],
    [ur'\\setminus', u'\u2216'],
    [ur'\\succnsim', u'\u22E9'],
    [ur'\\doteqdot', u'\u2251'],
    [ur'\\clubsuit', u'\u2663'],
    [ur'\\emptyset', u'\u2205'],
    [ur'\\sqsupset', u'\u2290'],
    [ur'\\fbox\{~~}', u'\u25AD'],
    [ur'\\curlyvee', u'\u22CE'],
    [ur'\\varkappa', u'\u03F0'],
    [ur'\\llcorner', u'\u231E'],
    [ur'\\varsigma', u'\u03C2'],
    [ur'\\approxeq', u'\u224A'],
    [ur'\\texteuro', u'\u20AC'],
    [ur'\\backcong', u'\u224C'],
    [ur'\\supseteq', u'\u2287'],
    [ur'\\circledS', u'\u24C8'],
    [ur'\\circledR', u'\u00AE'],
    [ur'\\textcent', u'\u00A2'],
    [ur'\\urcorner', u'\u231D'],
    [ur'\\lrcorner', u'\u231F'],
    [ur'\\boxminus', u'\u229F'],
    [ur'\\vartheta', u'\u03D1'],
    [ur'\\barwedge', u'\u22BC'],
    [ur'\\ding\{86}', u'\u2736'],
    [ur'\\sqsubset', u'\u228F'],
    [ur'\\subseteq', u'\u2286'],
    [ur'\\intercal', u'\u22BA'],
    [ur'\\ding\{73}', u'\u2606'],
    [ur'\\ulcorner', u'\u231C'],
    [ur'\\recorder', u'\u2315'],
    [ur'\\precnsim', u'\u22E8'],
    [ur'\\parallel', u'\u2225'],
    [ur'\\boxtimes', u'\u22A0'],
    [ur'\\ding\{55}', u'\u2717'],
    [ur'\\multimap', u'\u22B8'],
    [ur'\\maltese', u'\u2720'],
    [ur'\\nearrow', u'\u2197'],
    [ur'\\swarrow', u'\u2199'],
    [ur'\\lozenge', u'\u25CA'],
    [ur'\\sqrt\[3\]', u'\u221B'],
    [ur'\\succsim', u'\u227F'],
    [ur'\\tilde\{}', u'\u007E'],
    [ur'\\lessgtr', u'\u2276'],
    [ur'\\Upsilon', u'\u03D2'],
    [ur'\\Cdprime', u'\u042A'],
    [ur'\\gtrless', u'\u2277'],
    [ur'\\backsim', u'\u223D'],
    [ur'\\nexists', u'\u2204'],
    [ur'\\dotplus', u'\u2214'],
    [ur'\\searrow', u'\u2198'],
    [ur'\\check\{}', u'\u02C7'],
    [ur'\\lessdot', u'\u22D6'],
    [ur'\\boxplus', u'\u229E'],
    [ur'\\upsilon', u'\u03C5'],
    [ur'\\epsilon', u'\u03B5'],
    [ur'\\diamond', u'\u22C4'],
    [ur'\\bigstar', u'\u2605'],
    [ur'\\ddagger', u'\u2021'],
    [ur'\\cdprime', u'\u044A'],
    [ur'\\Uparrow', u'\u21D1'],
    [ur'\\sqrt\[4\]', u'\u221C'],
    [ur'\\between', u'\u226C'],
    [ur'\\sqangle', u'\u221F'],
    [ur'\\digamma', u'\u03DC'],
    [ur'\\uparrow', u'\u2191'],
    [ur'\\nwarrow', u'\u2196'],
    [ur'\\precsim', u'\u227E'],
    [ur'\\breve\{}', u'\u02D8'],
    [ur'\\because', u'\u2235'],
    [ur'\\bigcirc', u'\u25EF'],
    [ur'\\grave\{}', u'\u0060'],
    [ur'\\lesssim', u'\u2272'],
    [ur'\\partial', u'\u2202'],
    [ur'\\acute\{}', u'\u00B4'],
    [ur'\\natural', u'\u266E'],
    [ur'\\supset', u'\u2283'],
    [ur'\\hstrok', u'\u0127'],
    [ur'\\Tstrok', u'\u0166'],
    [ur'\\coprod', u'\u2210'],
    [ur'\\models', u'\u22A7'],
    [ur'\\otimes', u'\u2297'],
    [ur'\\degree', u'\u00B0'],
    [ur'\\gtrdot', u'\u22D7'],
    [ur'\\preceq', u'\u227C'],
    [ur'\\Lambda', u'\u039B'],
    [ur'\\lambda', u'\u03BB'],
    [ur'\\varrho', u'\u03F1'],
    [ur'\\Bumpeq', u'\u224E'],
    [ur'\\hybull', u'\u2043'],
    [ur'\\lmidot', u'\u0140'],
    [ur'\\nvdash', u'\u22AC'],
    [ur'\\lbrace', u'\u007B'],
    [ur'\\bullet', u'\u2022'],
    [ur'\\varphi', u'\u03D5'],
    [ur'\\bumpeq', u'\u224F'],
    [ur'\\ddot\{}', u'\u00A8'],
    [ur'\\Lmidot', u'\u013F'],
    [ur'\\Cprime', u'\u042C'],
    [ur'\\female', u'\u2640'],
    [ur'\\rtimes', u'\u22CA'],
    [ur'\\gtrsim', u'\u2273'],
    [ur'\\mapsto', u'\u21A6'],
    [ur'\\daleth', u'\u2138'],
    [ur'\\square', u'\u25A0'],
    [ur'\\nVDash', u'\u22AF'],
    [ur'\\rangle', u'\u3009'],
    [ur'\\tstrok', u'\u0167'],
    [ur'\\oslash', u'\u2298'],
    [ur'\\ltimes', u'\u22C9'],
    [ur'\\lfloor', u'\u230A'],
    [ur'\\marker', u'\u25AE'],
    [ur'\\Subset', u'\u22D0'],
    [ur'\\Vvdash', u'\u22AA'],
    [ur'\\cprime', u'\u044C'],
    [ur'\\propto', u'\u221D'],
    [ur'\\Hstrok', u'\u0126'],
    [ur'\\dlcrop', u'\u230D'],
    [ur'\\forall', u'\u2200'],
    [ur'\\nVdash', u'\u22AE'],
    [ur'\\Supset', u'\u22D1'],
    [ur'\\langle', u'\u3008'],
    [ur'\\ominus', u'\u2296'],
    [ur'\\rfloor', u'\u230B'],
    [ur'\\circeq', u'\u2257'],
    [ur'\\eqcirc', u'\u2256'],
    [ur'\\drcrop', u'\u230C'],
    [ur'\\veebar', u'\u22BB'],
    [ur'\\ulcrop', u'\u230F'],
    [ur'\\nvDash', u'\u22AD'],
    [ur'\\urcrop', u'\u230E'],
    [ur'\\exists', u'\u2203'],
    [ur'\\approx', u'\u2248'],
    [ur'\\dagger', u'\u2020'],
    [ur'\\boxdot', u'\u22A1'],
    [ur'\\succeq', u'\u227D'],
    [ur'\\bowtie', u'\u22C8'],
    [ur'\\subset', u'\u2282'],
    [ur'\\Sigma', u'\u03A3'],
    [ur'\\Omega', u'\u03A9'],
    [ur'\\nabla', u'\u2207'],
    [ur'\\colon', u'\u003A'],
    [ur'\\boxHu', u'\u2567'],
    [ur'\\boxHd', u'\u2564'],
    [ur'\\aleph', u'\u2135'],
    [ur'\\gnsim', u'\u22E7'],
    [ur'\\boxHU', u'\u2569'],
    [ur'\\boxHD', u'\u2566'],
    [ur'\\equiv', u'\u2261'],
    [ur'\\lneqq', u'\u2268'],
    [ur'\\alpha', u'\u03B1'],
    [ur'\\amalg', u'\u2210'],
    [ur'\\boxhU', u'\u2568'],
    [ur'\\boxhD', u'\u2565'],
    [ur'\\uplus', u'\u228E'],
    [ur'\\boxhu', u'\u2534'],
    [ur'\\kappa', u'\u03BA'],
    [ur'\\sigma', u'\u03C3'],
    [ur'\\boxDL', u'\u2557'],
    [ur'\\Theta', u'\u0398'],
    [ur'\\Vdash', u'\u22A9'],
    [ur'\\boxDR', u'\u2554'],
    [ur'\\boxDl', u'\u2556'],
    [ur'\\sqcap', u'\u2293'],
    [ur'\\boxDr', u'\u2553'],
    [ur'\\bar\{}', u'\u00AF'],
    [ur'\\dashv', u'\u22A3'],
    [ur'\\vDash', u'\u22A8'],
    [ur'\\boxdl', u'\u2510'],
    [ur'\\boxVl', u'\u2562'],
    [ur'\\boxVh', u'\u256B'],
    [ur'\\boxVr', u'\u255F'],
    [ur'\\boxdr', u'\u250C'],
    [ur'\\boxdL', u'\u2555'],
    [ur'\\boxVL', u'\u2563'],
    [ur'\\boxVH', u'\u256C'],
    [ur'\\boxVR', u'\u2560'],
    [ur'\\boxdR', u'\u2552'],
    [ur'\\theta', u'\u03B8'],
    [ur'\\lhblk', u'\u2584'],
    [ur'\\uhblk', u'\u2580'],
    [ur'\\ldotp', u'\u002E'],
    [ur'\\ldots', u'\u2026'],
    [ur'\\boxvL', u'\u2561'],
    [ur'\\boxvH', u'\u256A'],
    [ur'\\boxvR', u'\u255E'],
    [ur'\\boxvl', u'\u2524'],
    [ur'\\boxvh', u'\u253C'],
    [ur'\\boxvr', u'\u251C'],
    [ur'\\Delta', u'\u0394'],
    [ur'\\boxUR', u'\u255A'],
    [ur'\\boxUL', u'\u255D'],
    [ur'\\oplus', u'\u2295'],
    [ur'\\boxUr', u'\u2559'],
    [ur'\\boxUl', u'\u255C'],
    [ur'\\doteq', u'\u2250'],
    [ur'\\happy', u'\u32E1'],
    [ur'\\varpi', u'\u03D6'],
    [ur'\\boxur', u'\u2514'],
    [ur'\\smile', u'\u263A'],
    [ur'\\boxul', u'\u2518'],
    [ur'\\simeq', u'\u2243'],
    [ur'\\boxuR', u'\u2558'],
    [ur'\\boxuL', u'\u255B'],
    [ur'\\boxhd', u'\u252C'],
    [ur'\\gimel', u'\u2137'],
    [ur'\\Gamma', u'\u0393'],
    [ur'\\lnsim', u'\u22E6'],
    [ur'\\sqcup', u'\u2294'],
    [ur'\\omega', u'\u03C9'],
    [ur'\\sharp', u'\u266F'],
    [ur'\\times', u'\u00D7'],
    [ur'\\block', u'\u2588'],
    [ur'\\wedge', u'\u2227'],
    [ur'\\vdash', u'\u22A2'],
    [ur'\\angle', u'\u2220'],
    [ur'\\infty', u'\u221E'],
    [ur'\\gamma', u'\u03B3'],
    [ur'\\asymp', u'\u224D'],
    [ur'\\rceil', u'\u2309'],
    [ur'\\dot\{}', u'\u02D9'],
    [ur'\\lceil', u'\u2308'],
    [ur'\\delta', u'\u03B4'],
    [ur'\\gneqq', u'\u2269'],
    [ur'\\hat\{}', u'\u005E'],
    [ur'\\frown', u'\u2322'],
    [ur'\\phone', u'\u260E'],
    [ur'\\vdots', u'\u22EE'],
    [ur'\\perp', u'\u22A5'],
    [ur'\\surd', u'\u221A'],
    [ur'\\vert', u'\u007C'],
    [ur'\\prec', u'\u227A'],
    [ur'\\mldr', u'\u2026'],
    [ur'\\cong', u'\u2245'],
    [ur'\\star', u'\u002A'],
    [ur'\\geqq', u'\u2267'],
    [ur'\\cdot', u'\u22C5'],
    [ur'\\Vert', u'\u2016'],
    [ur'\\lnot', u'\u00AC'],
    [ur'\\leqq', u'\u2266'],
    [ur'\\beta', u'\u03B2'],
    [ur'\\beth', u'\u2136'],
    [ur'\\prod', u'\u220F'],
    [ur'\\circ', u'\u2218'],
    [ur'\\flat', u'\u266D'],
    [ur'\\oint', u'\u222E'],
    [ur'\\not<', u'\u226E'],
    [ur'\\not>', u'\u226F'],
    [ur'\\not=', u'\u2260'],
    [ur'\\odot', u'\u2299'],
    [ur'\\nldr', u'\u2025'],
    [ur'\\nmid', u'\u2224'],
    [ur'\\zeta', u'\u03B6'],
    [ur'\\iota', u'\u03B9'],
    [ur'\\gneq', u'\u2269'],
    [ur'\\boxH', u'\u2550'],
    [ur'\\hbar', u'\u210F'],
    [ur'\\boxv', u'\u2502'],
    [ur'\\boxh', u'\u2500'],
    [ur'\\male', u'\u2642'],
    [ur'\\sqrt', u'\u221A'],
    [ur'\\succ', u'\u227B'],
    [ur'\\lneq', u'\u2268'],
    [ur'\\boxV', u'\u2551'],
    [ur'\\quad', u'\u2003'],
    [ur'\\leq', u'\u2264'],
    [ur'\\Cup', u'\u22D3'],
    [ur'\\Psi', u'\u03A8'],
    [ur'\\k\{}', u'\u02DB'],
    [ur'\\=\{}', u'\u203E'],
    [ur'\\H\{}', u'\u02DD'],
    [ur'\\cup', u'\u222A'],
    [ur'\\c\{}', u'\u00B8'],
    [ur'\\geq', u'\u2265'],
    [ur'\\mho', u'\u2127'],
    [ur'\\Dzh', u'\u040F'],
    [ur'\\cap', u'\u2229'],
    [ur'\\bot', u'\u22A5'],
    [ur'\\psi', u'\u03C8'],
    [ur'\\chi', u'\u03C7'],
    [ur'\\Phi', u'\u03A6'],
    [ur'\\dzh', u'\u045F'],
    [ur'\\ast', u'\u002A'],
    [ur'\\ell', u'\u2113'],
    [ur'\\top', u'\u22A4'],
    [ur'\\lll', u'\u22D8'],
    [ur'\\tau', u'\u03C4'],
    [ur'\\Cap', u'\u22D2'],
    [ur'\\sad', u'\u2639'],
    [ur'\\iff', u'\u21D4'],
    [ur'\\eta', u'\u03B7'],
    [ur'\\eth', u'\u00F0'],
    [ur'\\d\{}', u'\u0323'],
    [ur'\\rho', u'\u03C1'],
    [ur'\\div', u'\u00F7'],
    [ur'\\phi', u'\u03C6'],
    [ur'\\Rsh', u'\u21B1'],
    [ur'\\vee', u'\u2228'],
    [ur'\\b\{}', u'\u02CD'],
    [ur'\\t\{}', u'\u0361'],
    [ur'\\int', u'\u222B'],
    [ur'\\sim', u'\u223C'],
    [ur'\\r\{}', u'\u02DA'],
    [ur'\\Lsh', u'\u21B0'],
    [ur'\\yen', u'\u00A5'],
    [ur'\\ggg', u'\u22D9'],
    [ur'\\mid', u'\u2223'],
    [ur'\\sum', u'\u2211'],
    [ur'\\Re', u'\u211C'],
    [ur'\\oe', u'\u0153'],
    [ur'\\DH', u'\u00D0'],
    [ur'\\ll', u'\u226A'],
    [ur'\\ng', u'\u014B'],
    [ur'\\wr', u'\u2240'],
    [ur'\\wp', u'\u2118'],
    [ur'\\=I', u'\u0406'],
    [ur'\\:\)', u'\u263A'],
    [ur'\\:\(', u'\u2639'],
    [ur'\\:G', u'\u32E1'],
    [ur'\\AE', u'\u00C6'],
    [ur'\\AA', u'\u00C5'],
    [ur'\\ss', u'\u00DF'],
    [ur'\\dz', u'\u0455'],
    [ur'\\ae', u'\u00E6'],
    [ur'\\aa', u'\u00E5'],
    [ur'\\th', u'\u00FE'],
    [ur'\\to', u'\u2192'],
    [ur'\\Pi', u'\u03A0'],
    [ur'\\mp', u'\u2213'],
    [ur'\\Im', u'\u2111'],
    [ur'\\pm', u'\u00B1'],
    [ur'\\pi', u'\u03C0'],
    [ur'\\"I', u'\u0407'],
    [ur'\\\'C', u'\u040B'],
    [ur'\\in', u'\u2208'],
    [ur'\\\'K', u'\u040C'],
    [ur'\\\'k', u'\u045C'],
    [ur'\\\'c', u'\u045B'],
    [ur'\\\'g', u'\u0453'],
    [ur'\\ni', u'\u220B'],
    [ur'\\OE', u'\u0152'],
    [ur'\\Xi', u'\u039E'],
    [ur'\\nu', u'\u03BD'],
    [ur'\\NG', u'\u014A'],
    [ur'\\xi', u'\u03BE'],
    [ur'\\gg', u'\u226B'],
    [ur'\\Dz', u'\u0405'],
    [ur'\\\'G', u'\u0403'],
    [ur'\\DJ', u'\u0110'],
    [ur'\\=e', u'\u0454'],
    [ur'\\=E', u'\u0404'],
    [ur'\\mu', u'\u03BC'],
    [ur'\\dj', u'\u0111'],
    [ur'\\TH', u'\u00DE'],
    [ur'\\:', u'\u2004'],
    [ur'\\;', u'\u2002'],
    [ur'\\&', u'\u0026'],
    [ur'\\\$', u'\u0024'],
    [ur'\\%', u'\u0025'],
    [ur'\\#', u'\u0023'],
    [ur'\\,', u'\u2009'],
    [ur'\\-', u'\u00AD'],
    [ur'\\S', u'\u00A7'],
    [ur'\\P', u'\u00B6'],
    [ur'\\O', u'\u00D8'],
    [ur'\\L', u'\u0141'],
    [ur'\\}', u'\u007D'],
    [ur'\\o', u'\u00F8'],
    [ur'\\l', u'\u0142'],
    [ur'\\h', u'\u210E'],
    [ur'\\i', u'\u2139'],
]
combiningmarks = [
    [ur'\\tilde', u'\u0303'],
    [ur'\\grave', u'\u0300'],
    [ur'\\dot', u'\u0307'],
    [ur'\\acute', u'\u0301'],
    [ur'\\doubleunderline', u'\u0333'],
    [ur'\\ddot', u'\u0308'],
    [ur'\\slash', u'\u0338'],
    [ur'\\overline', u'\u0305'],
    [ur'\\vec', u'\u20D7'],
    [ur'\\hat', u'\u0302'],
    [ur'\\breve', u'\u0306'],
    [ur'\\underline', u'\u0332'],
    [ur'\\strikethrough', u'\u0335'],
    [ur'\\bar', u'\u0305'],
]
subsuperscripts = [
    [ur'_x', u'\u2093'],
    [ur'_v', u'\u1D65'],
    [ur'_u', u'\u1D64'],
    [ur'_t', u'\u209C'],
    [ur'_s', u'\u209B'],
    [ur'_r', u'\u1D63'],
    [ur'_p', u'\u209A'],
    [ur'_o', u'\u2092'],
    [ur'_n', u'\u2099'],
    [ur'_m', u'\u2098'],
    [ur'_l', u'\u2097'],
    [ur'_k', u'\u2096'],
    [ur'_j', u'\u2C7C'],
    [ur'_i', u'\u1D62'],
    [ur'_h', u'\u2095'],
    [ur'_e', u'\u2091'],
    [ur'_a', u'\u2090'],
    [ur'\^\u222B', u'\u1DB4'],
    [ur'_>', u'\u02F2'],
    [ur'_=', u'\u208C'],
    [ur'_<', u'\u02F1'],
    [ur'_9', u'\u2089'],
    [ur'_8', u'\u2088'],
    [ur'_7', u'\u2087'],
    [ur'_6', u'\u2086'],
    [ur'_5', u'\u2085'],
    [ur'_4', u'\u2084'],
    [ur'_3', u'\u2083'],
    [ur'_2', u'\u2082'],
    [ur'_1', u'\u2081'],
    [ur'_0', u'\u2080'],
    [ur'_-', u'\u208B'],
    [ur'_\+', u'\u208A'],
    [ur'_\)', u'\u208E'],
    [ur'_\(', u'\u208D'],
    [ur'_\u03C1', u'\u1D68'],
    [ur'_\u03C7', u'\u1D6A'],
    [ur'_\u03C6', u'\u1D69'],
    [ur'_\u03B2', u'\u1D66'],
    [ur'_\u03B3', u'\u1D67'],
    [ur'\^\u03C6', u'\u1D60'],
    [ur'\^\u03C7', u'\u1D61'],
    [ur'\^\u03B4', u'\u1D5F'],
    [ur'\^\u03B3', u'\u1D5E'],
    [ur'\^\u03B2', u'\u1D5D'],
    [ur'\^8', u'\u2078'],
    [ur'\^9', u'\u2079'],
    [ur'\^<', u'\u02C2'],
    [ur'\^=', u'\u207C'],
    [ur'\^>', u'\u02C3'],
    [ur'\^0', u'\u2070'],
    [ur'\^1', u'\u00B9'],
    [ur'\^2', u'\u00B2'],
    [ur'\^3', u'\u00B3'],
    [ur'\^4', u'\u2074'],
    [ur'\^5', u'\u2075'],
    [ur'\^6', u'\u2076'],
    [ur'\^7', u'\u2077'],
    [ur'\^\(', u'\u207D'],
    [ur'\^\)', u'\u207E'],
    [ur'\^\*', u'\u002A'],
    [ur'\^\+', u'\u207A'],
    [ur'\^-', u'\u207B'],
    [ur'\^P', u'\u1D3E'],
    [ur'\^R', u'\u1D3F'],
    [ur'\^T', u'\u1D40'],
    [ur'\^U', u'\u1D41'],
    [ur'\^V', u'\u1111'],
    [ur'\^W', u'\u1D42'],
    [ur'\^H', u'\u1D34'],
    [ur'\^I', u'\u1D35'],
    [ur'\^J', u'\u1D36'],
    [ur'\^K', u'\u1D37'],
    [ur'\^L', u'\u1D38'],
    [ur'\^M', u'\u1D39'],
    [ur'\^N', u'\u1D3A'],
    [ur'\^O', u'\u1D3C'],
    [ur'\^A', u'\u1D2C'],
    [ur'\^B', u'\u1D2E'],
    [ur'\^D', u'\u1D30'],
    [ur'\^E', u'\u1D31'],
    [ur'\^G', u'\u1D33'],
    [ur'\^x', u'\u02E3'],
    [ur'\^y', u'\u02B8'],
    [ur'\^z', u'\u1DBB'],
    [ur'\^p', u'\u1D56'],
    [ur'\^r', u'\u02B3'],
    [ur'\^s', u'\u02E2'],
    [ur'\^t', u'\u1D57'],
    [ur'\^u', u'\u1D58'],
    [ur'\^v', u'\u1D5B'],
    [ur'\^w', u'\u02B7'],
    [ur'\^h', u'\u02B0'],
    [ur'\^i', u'\u2071'],
    [ur'\^j', u'\u02B2'],
    [ur'\^k', u'\u1D4F'],
    [ur'\^l', u'\u02E1'],
    [ur'\^m', u'\u1D50'],
    [ur'\^n', u'\u207F'],
    [ur'\^o', u'\u1D52'],
    [ur'\^a', u'\u1D43'],
    [ur'\^b', u'\u1D47'],
    [ur'\^c', u'\u1D9C'],
    [ur'\^d', u'\u1D48'],
    [ur'\^e', u'\u1D49'],
    [ur'\^f', u'\u1DA0'],
    [ur'\^g', u'\u1D4D'],
]


def replace(inp):
    result = []
    for f in inp:
        f = f.decode("utf-8")
        
        #f = re.sub(r"([^\\])([_|\^])", r"\1\\\2", f) # do not require backslash in front of ^ or _
        #f = re.sub(r"^([_|\^])", r"\\\1", f)
        
        # escape combining marks with a space after the backslash
        for c in combiningmarks:
            offset = 0
            for s in re.finditer(c[0], f):
                f = f[:s.start()+1+offset] + " " + f[s.start()+1+offset:]
                offset += 1
            
        for r in replacements:
            f = re.sub(r[0], r[1], f)

        # expand groups of subscripts: \_{01234}    
        offset = 0
        #for s in re.finditer(r"\\_\{[^\}]+\}", f):
        for s in re.finditer(ur"_\{[0-9\+-=\(\)<>\-aeoxjhklmnpstiruv\u03B2\u03B3\u03C1\u03C6\u03C7]+\}", f):
            newstring,n = re.subn(ur"([0-9\+-=\(\)<>\-aeoxjhklmnpstiruv\u03B2\u03B3\u03C1\u03C6\u03C7])", r"_\1", s.group(0)[2:-1])
            f = f[:s.start()+offset] + newstring + f[s.end()+offset:]
            offset += n*2 - (n + 3)
            
            
        # expand groups of superscripts: \^{01234}    
        offset = 0
        #for s in re.finditer(r"\\\^\{[^\}]+\}", f):
        for s in re.finditer(ur"\^\{[0-9\+-=\(\)<>ABDEGHIJKLMNOPRTUWabcdefghijklmnoprstuvwxyz\u03B2\u03B3\u03B4\u03C6\u03C7\u222B]+\}", f):
            newstring,n = re.subn(ur"([0-9\+-=\(\)<>ABDEGHIJKLMNOPRTUWabcdefghijklmnoprstuvwxyz\u03B2\u03B3\u03B4\u03C6\u03C7\u222B])", r"^\1", s.group(0)[2:-1])
            f = f[:s.start()+offset] + newstring + f[s.end()+offset:]
            offset += n*2 - (n + 3)
        
        # now replace subsuperscripts
        for r in subsuperscripts:
            f = re.sub(r[0], r[1], f)

        # combining marks (unicode char modifies previous char)
        for c in combiningmarks:
            offset = 0
            for s in re.finditer(r"\\ "+c[0][2:]+r"\{[^\}]+\}", f):
                newstring,n = re.subn(r"(.)", r"\1"+c[1], s.group(0)[len(c[0])+1:-1])
                f = f[:s.start()+offset] + newstring + f[s.end()+offset:]
                offset += n - (n + len(c[0])+1)

        result.append( unicode(f).encode("utf-8") )
                
    return result


if __name__ == "__main__":
    result = replace(sys.argv[1:])
    for r in result: print(r)
    